<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Password Request Batch 5-JV</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* ===== BASE ===== */
:root{
  --primary:#1f9d55;
  --primary-soft:rgba(31,157,85,.15);
  --danger:#d93025;
  --bg:#f3f5f7;
  --border:#dcdfe3;
  --text:#1f2933;
  --muted:#6b7280;
}

*{box-sizing:border-box}

body{
  margin:0;
  padding:20px;
  font-family: "Inter", system-ui, -apple-system, Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
}

/* ===== CONTAINER ===== */
.container{
  max-width:440px;
  margin:auto;
  background:#fff;
  padding:22px;
  border-radius:12px;
  box-shadow:0 10px 30px rgba(0,0,0,.08);
  position:relative;
}

/* ===== HEADER ===== */
h2{
  text-align:center;
  margin:0 0 18px;
  font-size:20px;
  letter-spacing:.3px;
}

/* ===== FORM ===== */
label{
  font-weight:600;
  font-size:13px;
  display:block;
  margin-top:14px;
}

input[type="text"],
input[type="tel"]{
  width:100%;
  padding:11px 12px;
  margin-top:6px;
  border:1px solid var(--border);
  border-radius:8px;
  font-size:14px;
  background:#fff;
  text-transform:uppercase;
  transition:border .2s, box-shadow .2s;
}

/* INPUT FOCUS */
input:focus{
  outline:none;
  border-color:var(--primary);
  box-shadow:0 0 0 3px var(--primary-soft);
}

/* ERROR */
.error{
  display:none;
  font-size:12px;
  color:var(--danger);
  margin-top:5px;
  animation:shake .25s linear;
}

@keyframes shake{
  0%{transform:translateX(0)}
  25%{transform:translateX(-3px)}
  50%{transform:translateX(3px)}
  75%{transform:translateX(-3px)}
  100%{transform:translateX(0)}
}

/* ===== CONSENT ===== */
.consent{
  margin-top:14px;
  font-size:12px;
  color:#374151;
  line-height:1.5;
}

/* ===== BUTTON ===== */
button{
  margin-top:18px;
  width:100%;
  padding:13px;
  background:linear-gradient(135deg,#25D366,#1f9d55);
  color:#fff;
  border:none;
  border-radius:10px;
  font-size:15px;
  font-weight:600;
  cursor:not-allowed;
  opacity:.6;
  transition:transform .15s, box-shadow .15s, opacity .15s;
}

button.enabled{
  cursor:pointer;
  opacity:1;
}

button.enabled:hover{
  transform:translateY(-1px);
  box-shadow:0 6px 14px rgba(0,0,0,.15);
}

/* ===== NOTE ===== */
.note{
  margin-top:10px;
  font-size:12px;
  text-align:center;
  color:var(--muted);
}

/* ===== OVERLAY ===== */
#overlay{
  position:fixed;
  inset:0;
  background:rgba(255,255,255,.8);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999;
}

.overlayBox{
  text-align:center;
  font-size:14px;
}

.spinner{
  width:44px;
  height:44px;
  border:4px solid #ddd;
  border-top:4px solid var(--primary);
  border-radius:50%;
  animation:spin 1s linear infinite;
  margin:0 auto 12px;
}

@keyframes spin{
  to{transform:rotate(360deg)}
}

/* ===== BLUR ===== */
.blur{
  filter:blur(3px);
  pointer-events:none;
}

/* ===== SUCCESS ===== */
.statusIcon,
.successIcon{
  font-size:46px;
  color:var(--primary);
  animation:pop .35s ease;
}

@keyframes pop{
  0%{transform:scale(.6);opacity:0}
  100%{transform:scale(1);opacity:1}
}

.ref{
  margin-top:10px;
  font-weight:600;
  cursor:pointer;
  user-select:none;
}

/* ===== SUMMARY BOX ===== */
.summary{
  border:1px solid var(--border);
  border-radius:10px;
  padding:14px;
  margin-top:16px;
  background:#fafafa;
  font-size:13px;
}

/* ===== FOOTER ===== */
.trademark{
  margin-top:24px;
  text-align:center;
  font-size:11px;
  color:#9ca3af;
}

/* ===== RESPONSIVE ===== */
@media (min-width:768px){
  body{padding:40px}
  .container{max-width:520px}
  h2{font-size:22px}
}

</style>
</head>

<body>

<div id="overlay">
  <div class="overlayBox">
    <div class="spinner"></div>
    <p><b>Processing...</b><br>Sending request to WhatsApp</p>
  </div>
</div>

<!-- FORM -->
<div class="container" id="formBox">
  <h2>üîê Password Request Batch 5-JV</h2>

  <form onsubmit="return validateAndSend();">
    <label>Company Name</label>
    <input type="text" id="company" placeholder="e.g. ABC COLLECTION SDN BHD">
    <div class="error" id="errCompany">All fields are required</div>

    <label>Director Name</label>
    <input type="text" id="director" placeholder="e.g. AHMAD BIN ALI">
    <div class="error" id="errDirector">All fields are required</div>

    <label>Company Reg. No.</label>
    <input type="text" id="regno" placeholder="e.g. 123456-A or 20251232645564">
    <div class="error" id="errRegno">All fields are required</div>

    <label>Contact No</label>
    <input type="tel" id="phone" placeholder="e.g. 0123456789">
    <div class="note" style="text-align:left;font-size:11px;margin-top:4px;">
    Contact number is for verification purposes only and may not be used for password delivery.</div>
    <div class="error" id="errPhone">Phone number must start with 0</div>

    <div class="consent">
      <input type="checkbox" id="consent" onclick="toggleButton()">
      By submitting this request, I acknowledge that I am requesting access to a
      password issued by SINGER (M) SDN BHD / BERJAYA CREDIT SDN BHD and accept full
      responsibility for its use.
    </div>

    <button type="submit" id="sendBtn" disabled>Send Request</button>
  </form>

  <div class="note">Request will be sent via WhatsApp</div>
</div>

<!-- SUCCESS -->
<div class="container" id="successBox" style="display:none;">
  <div style="text-align:center;">
    <div class="statusIcon">üìÑ</div>
    <h2>Request Prepared</h2>
    <div class="ref" id="refDisplay"></div>
    <p style="font-size:12px;color:#666;">
      Reference number is for tracking purposes only.
    </p>
  </div>

  <!-- SUMMARY BOX -->
  <div style="
      border:1px solid #ddd;
      border-radius:6px;
      padding:12px;
      margin-top:15px;
      font-size:13px;
      background:#fafafa;
  ">
    <b>Request Summary</b><br><br>

    <b>Company Name</b><br>
    <span id="sumCompany"></span><br><br>

    <b>Director Name</b><br>
    <span id="sumDirector"></span><br><br>

    <b>Company Reg. No.</b><br>
    <span id="sumRegno"></span><br><br>

    <b>Contact No</b><br>
<span id="sumPhone"></span><br>
<span class="summaryNote">
  For verification purposes only. Password may be delivered via other authorized channels.
</span>

  </div>

  <!-- CONSENT CONFIRMATION -->
  <div style="
      font-size:12px;
      color:#555;
      margin-top:12px;
      padding-top:10px;
      border-top:1px dashed #ccc;
  ">
    By submitting this request, you have confirmed that you acknowledge and
    accept full responsibility for the use of the password issued by
    <b>SINGER (M) SDN BHD / BERJAYA CREDIT SDN BHD</b>.
  </div>

  <p style="text-align:center;margin-top:15px;font-size:13px;">
    WhatsApp has been opened with your request details.<br><br>
    <b>Please tap ‚ÄúSend‚Äù in WhatsApp to complete this request.</b><br><br>
    After sending, you may safely close this page.
  </p>
</div>


<div class="trademark">
  ¬© <span id="year"></span>
  Powered by
  <a href="https://sczpnet.org" target="_blank" rel="noopener">
    sczpnet.org
  </a>
  ¬∑ Internal Use Only ¬∑
</div>

<script>
var IS_SUBMITTED = false;

// REAL-TIME PHONE VALIDATION
document.getElementById("phone").addEventListener("input", function () {

  let raw = this.value.replace(/\D/g, "");
  let err = document.getElementById("errPhone");

  if (raw === "") {
    err.style.display = "none";
    this.value = "";
    return;
  }

  if (!raw.startsWith("0")) {
    err.innerText = "Number must start with 0";
    err.style.display = "block";
  } else {
    err.style.display = "none";
  }

  // limit max 11 digit
  if (raw.length > 11) raw = raw.slice(0,11);

  let formatted = raw;

  // ===== MOBILE =====
  if (raw.startsWith("01")) {
    if (raw.length > 3) {
      formatted = raw.slice(0,3) + "-" + raw.slice(3);
    }
  }

  // ===== LANDLINE (02‚Äì09 except 01) =====
  else {
    if (raw.length >= 3) {
      // 2-digit area code (03,04,05,06,07,09)
      if (["03","04","05","06","07","09"].includes(raw.slice(0,2))) {
        if (raw.length > 2) {
          formatted = raw.slice(0,2) + "-" + raw.slice(2);
        }
      }
      // fallback safety
      else if (raw.length > 3) {
        formatted = raw.slice(0,3) + "-" + raw.slice(3);
      }
    }
  }

  this.value = formatted;
});


function toggleButton() {
  var btn = document.getElementById("sendBtn");
  btn.disabled = !document.getElementById("consent").checked;
  btn.classList.toggle("enabled", !btn.disabled);
}

function showOverlay(show) {
  document.getElementById("overlay").style.display = show ? "flex" : "none";
  document.getElementById("formBox").classList.toggle("blur", show);
}

function validateAndSend() {
  if (IS_SUBMITTED) return false;

  var company = companyVal();
  var director = directorVal();
  var regno = regnoVal();
  var phone = phoneVal();

  hideErrors();

  var valid = true;

  if (!company) showErr("errCompany"), valid=false;
  if (!director) showErr("errDirector"), valid=false;
  if (!regno) showErr("errRegno"), valid=false;

  if (!phone || !phone.startsWith("0")) {
    showErr("errPhone");
    valid = false;
  }

  if (!valid) return false;

  IS_SUBMITTED = true;
  showOverlay(true);
  sendWhatsApp();
  return false;
}

function showErr(id){ document.getElementById(id).style.display="block"; }
function hideErrors(){ document.querySelectorAll(".error").forEach(e=>e.style.display="none"); }

function generateReference() {
  var d=new Date();
  return "JV5-"+d.getFullYear()+String(d.getMonth()+1).padStart(2,"0")+String(d.getDate()).padStart(2,"0")+"-"+String(d.getHours()).padStart(2,"0")+String(d.getMinutes()).padStart(2,"0")+String(d.getSeconds()).padStart(2,"0");
}

function sendWhatsApp() {
  var company=companyVal(), director=directorVal(), regno=regnoVal(), phone=phoneVal();
  var ref=generateReference(), time=new Date().toLocaleString();

  var data=new FormData();
  data.append("time",time);
  data.append("company",company);
  data.append("director",director);
  data.append("regno",regno);
  data.append("phone",phone);
  data.append("ref",ref);
  data.append("ua",navigator.userAgent);
  data.append("platform",navigator.platform);
  data.append("lang",navigator.language);

  fetch("https://script.google.com/macros/s/AKfycbwwe9gIOhrk5SPlPXA2Oqpc6IsXK7gz9hOCrlzSn3fv7FI625J7WBrVZ9xHCJPOpnf2/exec",{method:"POST",body:data})
  .then(r=>r.json())
  .then(res=>{
    if(res.status!=="OK"){
      alert("Request already submitted or error occurred.");
      IS_SUBMITTED=false;
      showOverlay(false);
      return;
    }

var msg =
"üîê PASSWORD REQUEST BATCH 5-JV\n\n" +
"Time: " + time + "\n\n" +
"Company: " + company + "\n" +
"Director: " + director + "\n" +
"Reg No: " + regno + "\n" +
"Contact No: " + phone + "\n\n" +
"CONSENT:\n" +
"I acknowledge that I am requesting access to a password issued by SINGER (M) SDN BHD / BERJAYA CREDIT SDN BHD and accept full responsibility for its use.\n\n" +
"Ref No: " + ref;

    window.open("https://wa.me/60176701984?text="+encodeURIComponent(msg),"_blank");

document.getElementById("formBox").style.display="none";
document.getElementById("successBox").style.display="block";
document.getElementById("refDisplay").innerText="Reference No: "+ref;

document.getElementById("sumCompany").innerText = company;
document.getElementById("sumDirector").innerText = director;
document.getElementById("sumRegno").innerText = regno;
document.getElementById("sumPhone").innerText = phone;

showOverlay(false);

  })
  .catch(()=>{
    alert("Network error. Please try again.");
    IS_SUBMITTED=false;
    showOverlay(false);
  });
}

function companyVal(){return document.getElementById("company").value.trim().toUpperCase();}
function directorVal(){return document.getElementById("director").value.trim().toUpperCase();}
function regnoVal(){return document.getElementById("regno").value.trim().toUpperCase();}
function phoneVal(){return document.getElementById("phone").value.trim();}

(function(){
  document.getElementById("year").innerText = new Date().getFullYear();
})();

</script>

</body>
</html>

















