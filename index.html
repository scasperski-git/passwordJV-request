<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Password Request Batch 5-JV</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:Arial,sans-serif;background:#f4f6f8;padding:20px}
.container{max-width:420px;margin:auto;background:#fff;padding:20px;border-radius:8px;box-shadow:0 0 10px rgba(0,0,0,.1);position:relative}
.blur{filter:blur(3px);pointer-events:none}
label{font-weight:bold}
input{width:100%;padding:10px;margin:5px 0;border:1px solid #ccc;border-radius:5px;text-transform:uppercase}
input.invalid{border-color:#d93025}
.error{color:#d93025;font-size:12px;display:none;margin-bottom:8px}
button{width:100%;padding:12px;background:#25D366;color:#fff;border:none;border-radius:5px;font-size:16px;opacity:.6}
button.enabled{opacity:1;cursor:pointer}
#overlay{position:fixed;inset:0;background:rgba(255,255,255,.75);display:none;align-items:center;justify-content:center;z-index:999}
.spinner{border:4px solid #ddd;border-top:4px solid #25D366;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.summaryBox{border:1px solid #ddd;border-radius:6px;padding:12px;text-align:left;font-size:13px}
.trademark{text-align:center;font-size:11px;color:#999;margin-top:25px}
</style>
</head>

<body>

<div id="overlay"><div><div class="spinner"></div><p><b>Processing‚Ä¶</b></p></div></div>

<div class="container" id="formBox">
<h2>üîê Password Request Batch 5-JV</h2>

<form onsubmit="return validateAndSend();">
<label>Company Name</label>
<input id="company" placeholder="ABC COLLECTION SDN BHD">
<div class="error" id="errCompany">Required</div>

<label>Director Name</label>
<input id="director" placeholder="AHMAD BIN ALI">
<div class="error" id="errDirector">Required</div>

<label>Company Reg. No</label>
<input id="regno" placeholder="123456-A">
<div class="error" id="errRegno">Required</div>

<label>Contact No</label>
<input id="phone" inputmode="numeric" pattern="[0-9]*" placeholder="012-3456789">
<div class="error" id="errPhone">Must start with 0</div>

<div style="font-size:13px;margin:10px 0">
<input type="checkbox" id="consent" onclick="toggleButton()"> I acknowledge and accept full responsibility.
</div>

<button id="sendBtn" disabled>Send Request</button>
</form>
</div>

<div class="container" id="successBox" style="display:none">
<h2>Request Prepared</h2>
<div class="summaryBox" id="summaryBox"></div>
<p style="font-size:12px;color:#666">Please screenshot this summary.</p>
</div>

<div class="trademark" id="trademark"></div>

<script>
const phoneInput=document.getElementById("phone");

phoneInput.addEventListener("input",()=>{
  let v=phoneInput.value.replace(/\D/g,"");
  if(v.length>3)v=v.slice(0,3)+"-"+v.slice(3,11);
  phoneInput.value=v;

  if(v && !v.startsWith("0")){
    phoneInput.classList.add("invalid");
    errPhone.style.display="block";
  }else{
    phoneInput.classList.remove("invalid");
    errPhone.style.display="none";
  }
});

function toggleButton(){
  sendBtn.disabled=!consent.checked;
  sendBtn.classList.toggle("enabled",!sendBtn.disabled);
}

function validateAndSend(){
  let ok=true;
  ["company","director","regno"].forEach(id=>{
    if(!document.getElementById(id).value.trim()){
      document.getElementById("err"+id.charAt(0).toUpperCase()+id.slice(1)).style.display="block";
      ok=false;
    }
  });
  if(!phoneInput.value.startsWith("0")) ok=false;
  if(!ok) return false;

  overlay.style.display="flex";
  sendWhatsApp();
  return false;
}

function sendWhatsApp(){
  const company=company.value.toUpperCase();
  const director=director.value.toUpperCase();
  const regno=regno.value.toUpperCase();
  const phone=phoneInput.value;
  const ref="JV5-"+Date.now();

  fetch("https://script.google.com/macros/s/AKfycbzuMRU24qOgf_Y3nPxY7VpXK100BGro-HSzVHZpjXhhjMn_xf7tp4YQZhRKil3UnoI/exec",{method:"POST",body:new FormData(Object.entries({
    company,director,regno,phone,ref
  }))}).then(()=>{

    summaryBox.innerHTML=`
<b>Company:</b> ${company}<br>
<b>Director:</b> ${director}<br>
<b>Reg No:</b> ${regno}<br>
<b>Contact:</b> ${phone}<br>
<b>Ref No:</b> ${ref}<hr>
By submitting this request, I acknowledge that I am requesting access to a password issued by SINGER (M) SDN BHD / BERJAYA CREDIT SDN BHD and accept full responsibility for its use.
`;

    formBox.style.display="none";
    successBox.style.display="block";
    overlay.style.display="none";

    window.open("https://wa.me/60176701984","_blank");
  });
}

trademark.innerText="¬© "+new Date().getFullYear()+" ¬∑ Authorized Access Only";
</script>
</body>
</html>
